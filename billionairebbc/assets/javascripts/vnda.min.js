(()=>{var m=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var z=Object.prototype.hasOwnProperty;var o=(t,e)=>()=>(t&&(e=t(t=0)),e);var s=(t,e)=>{for(var r in e)m(t,r,{get:e[r],enumerable:!0})},U=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of F(e))!z.call(t,n)&&n!==r&&m(t,n,{get:()=>e[n],enumerable:!(a=J(e,n))||a.enumerable});return t};var M=t=>U(m({},"__esModule",{value:!0}),t);var h={};s(h,{execute:()=>w});function w(t,e,r){return new Promise(async(a,n)=>{try{window.grecaptcha&&grecaptcha.execute&&t&&await grecaptcha.execute(t,e).then(r||$.noop),a()}catch(d){n(d)}})}var v=o(()=>{});var g={};s(g,{gotoCheckout:()=>B,saveEmail:()=>Z,validateEmail:()=>W});function Z(t,e){return w(e,{action:"finish_order"},a=>$.post("/recaptcha/"+a)).then(()=>$.post("/checkout/email",{email:t},$.noop,"json"))}function B(){return new Promise(function(t){window.google_tag_manager&&window.dataLayer&&dataLayer.push?dataLayer.push({event:"finish-order",eventCallback:function(){location.href="/checkout",t()},eventTimeout:2e3}):(location.href="/checkout",t())})}function W(t){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i;return e.test(t)}var b=o(()=>{v()});var y={};s(y,{all:()=>_,feed:()=>K,find:()=>X,find_by_attribute:()=>Q,variant_list:()=>p});function K(t){let e=JSON.parse(JSON.stringify(t));for(let r=0;r<e.length;++r){let a=e[r];a.properties&&(typeof a.properties.property1=="string"&&(a.properties.property1=JSON.parse(a.properties.property1)),typeof a.properties.property2=="string"&&(a.properties.property2=JSON.parse(a.properties.property2)),typeof a.properties.property3=="string"&&(a.properties.property3=JSON.parse(a.properties.property3)),p.push(a))}}function Q(t){return _().filter(function(e){var r=!0;for(var a in t){let n=e.properties[a];t[a]!==n.value&&(r=!1)}return r})}function X(t){return p.filter(function(e){var r=!0;for(var a in t){var n=e.properties.property1,d=e.properties.property2,l=e.properties.property3;if(n&&a===n.name)var f=n.value;else if(d&&a===d.name)var f=d.value;else if(l&&a===l.name)var f=l.value;f!==t[a]&&(r=!1)}return r})}function _(){return p}var p,T=o(()=>{p=[]});var E={};s(E,{hide:()=>C,show:()=>Y});function C(t){t||(t=document.body),$(t).find(".page-loader").remove()}function Y(t){t||(t=document.body),C(t);let e='<div class="page-loader"><div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>';$(e).appendTo(t)}var H=o(()=>{});var x={};s(x,{show:()=>tt});function tt(t,e){$("#captcha-container").remove();let r=$('<div id="captcha-container"/>').css({marginBottom:20}).prependTo(t);$("<p/>").text("Para prosseguir, informe o resultado da soma").appendTo(r),$("<img/>").attr("src","data:image/png;base64,"+e).appendTo(r),$('<input name="captcha[response]" type="number">').addClass("form-control").css({width:90,display:"inline",marginLeft:20}).appendTo(r)}var S=o(()=>{});var et,at,rt,nt,ot,it,c,O,R=o(()=>{et=t=>{let{data:e}=t;window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"add_to_cart",ecommerce:{items:[{...e,quantity:e.quantity||1}]}})},at=t=>{let{data:e}=t;window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"remove_from_cart",ecommerce:{items:[{...e,quantity:e.quantity||1}]}})},rt=t=>{window.window.dataLayer.push({event:"search",search_term:t.data.q})},nt=t=>{window.window.dataLayer.push({event:"login",method:t.data.method})},ot=t=>{window.window.dataLayer.push({event:"sign_up",method:t.data.method})},it=t=>(e,r)=>t(e,a=>{if(window.dataLayerVersion!=="GA4"||!window.dataLayer)return()=>{};r(a)}),c={ADD_CART:"add-cart",DELETE_ITEM_CART:"delete-item-cart",SEARCH:"search",LOGIN:"login",REGISTER:"register"},O=t=>{let e=it(t);e(c.ADD_CART,et),e(c.DELETE_ITEM_CART,at),e(c.SEARCH,rt),e(c.LOGIN,nt),e(c.REGISTER,ot)}});var A={};s(A,{getActionDataFromElement:()=>L,getHandlers:()=>ft,init:()=>ut,registerHandler:()=>D,unregisterAllHandlers:()=>lt});var i,D,L,k,q,st,dt,ct,pt,u,ut,lt,ft,I=o(()=>{R();i={},D=(t,e)=>{i[t]||(i[t]=[]),i[t].push(e)},L=t=>{if(!t)return;let e=JSON.parse(t.getAttribute("data-event-json")),r=t.getAttribute("data-event-quantity")||void 0,a=t.getAttribute("data-event-variant-selected")||e.item_variant,n={...e,quantity:r,item_variant:a};return{element:t,action:t.getAttribute("data-action"),data:n}},k=t=>{if(t.target){if(t.target.getAttribute("data-action"))return L(t.target);if(t.target.parentElement.getAttribute("data-action"))return L(t.target.parentElement)}},q=t=>{u(k(t))},st=()=>{window.addEventListener("click",q),ct(),dt()},dt=()=>{let t={"#login":"login","#register":"register"}[window.location.hash];t&&(u({element:window,action:t,data:{method:"credentials"}}),window.location.hash="")},ct=()=>{let t=new URLSearchParams(window.location.search);t.get("q")&&u({element:window,action:"search",data:Object.fromEntries(t.entries())})},pt=()=>{window.vdaFn&&(window.removeEventListener("click",window.vdaFn),window.vda.forEach(t=>u(k(t))),window.vadFn=void 0,window.vda=void 0)},u=t=>{t&&i[t.action]&&i[t.action].forEach(e=>e(t))},ut=()=>{O(D),st(),pt()},lt=()=>{window.removeEventListener("click",q),Object.keys(i).forEach(t=>{i[t]=[]})},ft=()=>i});function N(t){$.get("/carrinho/popup",function(e){t(e),window.dataLayer&&dataLayer.push&&dataLayer.push({event:"cart-popup-loaded"})})}var j=o(()=>{});var G={};s(G,{captcha:()=>x,checkout:()=>g,dataActions:()=>A,loadCartPopup:()=>N,loader:()=>E,recaptcha:()=>h,variants:()=>y});var P=o(()=>{b();T();v();H();S();I();j()});window.Vnda=$.extend(window.Vnda||{},(P(),M(G)));window.vnda=window.vnda||window.Vnda||{};window.Vnda.dataActions.init();var V=$("#vndajs");V.data("variant")&&vnda.variants.feed(V.data("variant"));$('[data-content-type="banner"]').each(function(){if(window.ga){var t=$(this);ga("ec:addPromo",{id:t.attr("alt"),name:t.attr("alt"),position:t.attr("data-banner-position")});var e=$(this).parent();e.is("a")&&e.on("click",function(){ga("ec:setAction","promo_click"),ga("send","event","Internal Promotions","click",$(this).attr("alt"))})}});$("#product-also-viewed").length>0&&$.ajax({type:"GET",url:"/produto/visualizado",success:function(t){$("#product-also-viewed").html(t)}});})();
//# sourceMappingURL=vnda.min.js.map
